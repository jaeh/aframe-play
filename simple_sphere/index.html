<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>sphere 01</title>
    <meta name="description" content="Hello, WebVR! â€¢ A-Frame">
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene background="color: #FAFAFA">

      <a-assets>
        <img id="l01" src="assets/deathSphere.png">
    </a-assets>
      <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>
      <a-sphere
      id="sphere_01"
      material="src: #l01; side: double; transparent: true; depthTest: false"
      segments-height="128"
      segments-width="128"
      position="0 2.25 -5" 
      radius="1.25" 
      animation__rot="property: rotation; dur: 8000; easing: linear; dir: normal; from:0 0 0; to: 0 360 0; loop: true;"
      animation__op="property: opacity; dur: 8000; easing: linear; from:0; to: 1; dir: alternate; loop: true"
      animation__sc="property: scale; easing: linear; from: 2 2 2; to: 2 2 2; dir: alternate; loop: true;"
      ></a-sphere>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4" shadow></a-plane>
    </a-scene>

    <script> 

      // corona statistic
      const confirmed_t1 = 660706;
      const confirmed_t0 = 593291;
      const confirmed = (confirmed_t1 - confirmed_t0)/confirmed_t0;
      // t1 > t0 11.36288937469134
      // t1 < t0 -0.28778657104530875

      const deaths_t1 = 30652;
      const deaths_t0 = 27198;
      const deaths = (deaths_t1 - deaths_t0)/deaths_t0;

      const recovered_t1 = 139415;
      const recovered_t0 = 130915;
      const recovered = (recovered_t1 - recovered_t0)/recovered_t0;

      console.log("C " + confirmed,"D " + deaths, "R " +recovered);

      const scene = document.querySelector('a-scene');
      const run = () => {


        const sphere = document.querySelector("#sphere_01");
        const anim_rot = sphere.getAttribute("animation__rot");
        const anim_sc = sphere.getAttribute("animation__sc");
        const anim_op = sphere.getAttribute("animation__op");
        
        if (deaths > recovered){
        
          anim_rot.dur = 1200;
          anim_sc.to = "4 4 4";
          anim_op.from = 1;
          anim_op.to = 0;
          anim_op.dur = 1600;
        } else {

        }
        console.log(anim_sc)


        sphere.setAttribute("animation__rot", anim_rot);
        sphere.setAttribute("animation__op", anim_op);
        sphere.setAttribute("animation__sc", anim_sc);
        console.log("hello", anim_rot);
      }
      if (scene.hasLoaded) {
        run()
      } else {
        scene.addEventListener('loaded', run)
      }

    </script>

  </body>
</html>